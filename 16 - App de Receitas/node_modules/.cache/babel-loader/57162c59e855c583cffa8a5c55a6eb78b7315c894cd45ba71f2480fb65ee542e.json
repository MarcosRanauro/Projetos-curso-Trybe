{"ast":null,"code":"var _jsxFileName = \"/home/marcos-ranauro/Trybe/Projetos/sd-027-b-project-recipes-app/src/pages/RecipeInProgress.jsx\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from 'react';\nimport { useRouteMatch, useHistory } from 'react-router-dom';\nimport RecipeContext from '../context/RecipeContext';\nimport { fetchRecipe } from '../helpers/recipeApi';\nimport './styles/RecipeInProgress.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RecipeInProgress() {\n  _s();\n  const {\n    recipe,\n    setRecipe,\n    ingredientList,\n    setIngredientList\n  } = useContext(RecipeContext);\n  const {\n    params\n  } = useRouteMatch();\n  const [completeIngredients, setCompleteIngredients] = useState([]);\n  const history = useHistory();\n  const handleClick = () => {\n    const finishedRecipe = {\n      recipe,\n      completeIngredients\n    };\n    const storedRecipes = localStorage.getItem('finishedRecipes');\n    const parsedRecipes = storedRecipes ? JSON.parse(storedRecipes) : [];\n    const updatedRecipes = [...parsedRecipes, finishedRecipe];\n    localStorage.setItem('finishedRecipes', JSON.stringify(updatedRecipes));\n    history.push('/done-recipes');\n  };\n  const handleIngredientCheck = index => {\n    const ingredientLabel = document.getElementById(`ingredient-${index}`);\n    ingredientLabel.classList.toggle('completed');\n    ingredientLabel.classList.toggle('incomplete');\n    const newCompleteIngredients = [...completeIngredients];\n    newCompleteIngredients[index] = !newCompleteIngredients[index];\n    setCompleteIngredients(newCompleteIngredients);\n  };\n  useEffect(() => {\n    const getRecipe = async () => {\n      const resultRecipe = await fetchRecipe(params.id);\n      setRecipe(resultRecipe);\n    };\n    getRecipe();\n  }, [params.id, setRecipe]);\n  useEffect(() => {\n    if (recipe) {\n      const ingredients = [];\n      const n = 20;\n      for (let i = 1; i <= n; i += 1) {\n        if (recipe[`strIngredient${i}`]) {\n          ingredients.push(`${recipe[`strIngredient${i}`]} - ${recipe[`strMeasure${i}`]}`);\n        } else {\n          break;\n        }\n      }\n      setIngredientList(ingredients);\n      setCompleteIngredients(new Array(ingredients.length).fill(false));\n    }\n  }, [recipe, setIngredientList]);\n  const allIngredientsCompleted = completeIngredients.every(completed => completed);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"\",\n      alt: \"\",\n      \"data-testid\": \"recipe-photo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      \"data-testid\": \"recipe-title\",\n      children: \"RecipeInProgress\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), ingredientList && ingredientList.map((element, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n      \"data-testid\": `${index}-ingredient-step`,\n      id: `ingredient-${index}`,\n      className: completeIngredients[index] ? 'completed' : 'incomplete',\n      children: [element, /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        value: element,\n        onChange: () => handleIngredientCheck(index),\n        checked: completeIngredients[index]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"compartilhar\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        \"data-testid\": \"share-btn\",\n        name: \"compartilhar\",\n        children: \"compartilhar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"favorite\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        \"data-testid\": \"favorite-btn\",\n        name: \"favorite\",\n        children: \"favoritar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        \"data-testid\": \"recipe-category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      \"data-testid\": \"instructions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"finish\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        \"data-testid\": \"finish-recipe-btn\",\n        name: \"finish\",\n        type: \"button\",\n        disabled: !allIngredientsCompleted,\n        onClick: handleClick,\n        children: \"finalizar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(RecipeInProgress, \"iqVoa2z8TaAdfOH0jCF03n5havg=\", false, function () {\n  return [useRouteMatch, useHistory];\n});\n_c = RecipeInProgress;\nexport default RecipeInProgress;\nvar _c;\n$RefreshReg$(_c, \"RecipeInProgress\");","map":{"version":3,"names":["useContext","useEffect","useState","useRouteMatch","useHistory","RecipeContext","fetchRecipe","RecipeInProgress","recipe","setRecipe","ingredientList","setIngredientList","params","completeIngredients","setCompleteIngredients","history","handleClick","finishedRecipe","storedRecipes","localStorage","getItem","parsedRecipes","JSON","parse","updatedRecipes","setItem","stringify","push","handleIngredientCheck","index","ingredientLabel","document","getElementById","classList","toggle","newCompleteIngredients","getRecipe","resultRecipe","id","ingredients","n","i","Array","length","fill","allIngredientsCompleted","every","completed","map","element"],"sources":["/home/marcos-ranauro/Trybe/Projetos/sd-027-b-project-recipes-app/src/pages/RecipeInProgress.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport { useRouteMatch, useHistory } from 'react-router-dom';\nimport RecipeContext from '../context/RecipeContext';\nimport { fetchRecipe } from '../helpers/recipeApi';\nimport './styles/RecipeInProgress.css';\n\nfunction RecipeInProgress() {\n  const {\n    recipe,\n    setRecipe,\n    ingredientList,\n    setIngredientList,\n  } = useContext(RecipeContext);\n  const { params } = useRouteMatch();\n  const [completeIngredients, setCompleteIngredients] = useState([]);\n  const history = useHistory();\n\n  const handleClick = () => {\n    const finishedRecipe = { recipe, completeIngredients };\n    const storedRecipes = localStorage.getItem('finishedRecipes');\n    const parsedRecipes = storedRecipes ? JSON.parse(storedRecipes) : [];\n    const updatedRecipes = [...parsedRecipes, finishedRecipe];\n    localStorage.setItem('finishedRecipes', JSON.stringify(updatedRecipes));\n    history.push('/done-recipes');\n  };\n\n  const handleIngredientCheck = (index) => {\n    const ingredientLabel = document.getElementById(`ingredient-${index}`);\n    ingredientLabel.classList.toggle('completed');\n    ingredientLabel.classList.toggle('incomplete');\n    const newCompleteIngredients = [...completeIngredients];\n    newCompleteIngredients[index] = !newCompleteIngredients[index];\n    setCompleteIngredients(newCompleteIngredients);\n  };\n\n  useEffect(() => {\n    const getRecipe = async () => {\n      const resultRecipe = await fetchRecipe(params.id);\n      setRecipe(resultRecipe);\n    };\n    getRecipe();\n  }, [params.id, setRecipe]);\n\n  useEffect(\n    () => {\n      if (recipe) {\n        const ingredients = [];\n        const n = 20;\n        for (let i = 1; i <= n; i += 1) {\n          if (recipe[`strIngredient${i}`]) {\n            ingredients.push(\n              `${recipe[`strIngredient${i}`]} - ${recipe[`strMeasure${i}`]}`,\n            );\n          } else {\n            break;\n          }\n        }\n        setIngredientList(ingredients);\n        setCompleteIngredients(new Array(ingredients.length).fill(false));\n      }\n    },\n    [recipe, setIngredientList],\n  );\n  const allIngredientsCompleted = completeIngredients.every((completed) => completed);\n\n  return (\n    <div>\n      <img src=\"\" alt=\"\" data-testid=\"recipe-photo\" />\n      <h1 data-testid=\"recipe-title\">RecipeInProgress</h1>\n\n      {ingredientList && ingredientList.map((element, index) => (\n        <label\n          data-testid={ `${index}-ingredient-step` }\n          key={ index }\n          id={ `ingredient-${index}` }\n          className={ completeIngredients[index] ? 'completed' : 'incomplete' }\n        >\n          {element}\n          <input\n            type=\"checkbox\"\n            value={ element }\n            onChange={ () => handleIngredientCheck(index) }\n            checked={ completeIngredients[index] }\n          />\n        </label>\n      ))}\n      <label htmlFor=\"compartilhar\">\n        <button data-testid=\"share-btn\" name=\"compartilhar\">\n          compartilhar\n        </button>\n      </label>\n      <label htmlFor=\"favorite\">\n        <button data-testid=\"favorite-btn\" name=\"favorite\">\n          favoritar\n        </button>\n      </label>\n      <label htmlFor=\"\">\n        <input type=\"text\" data-testid=\"recipe-category\" />\n      </label>\n      <p data-testid=\"instructions\" />\n      <label htmlFor=\"finish\">\n        <button\n          data-testid=\"finish-recipe-btn\"\n          name=\"finish\"\n          type=\"button\"\n          disabled={ !allIngredientsCompleted }\n          onClick={ handleClick }\n        >\n          finalizar\n        </button>\n      </label>\n    </div>\n  );\n}\nexport default RecipeInProgress;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}